// add your custom scripts here
// as the page loads, call these scripts
jQuery(function(e){e.issue_button_transform=function(t,n,r,i,s){var o=e("#issue-addtocart-"+t).val();e("#issue-addtocart-"+t).attr("disabled","disabled").addClass("disabled").val(s);e.issue_add_to_cart_ajax(t,n,r,i,o)};e.issue_add_to_cart_ajax=function(t,n,r,i,s){var o=e("#issue-quantity-"+t).val(),u=t.split("_");u=u[0];var a={cart66ItemId:u,itemName:r,options_1:"",options_2:"",item_quantity:o,item_user_price:"",product_url:i};ajaxManager.addReq({type:"POST",url:n+"=2",data:a,dataType:"json",success:function(r){e.pnotify({title:"Item added",text:'<div>"<span>'+a.itemName+'</span>" - added to cart</div><div><a href="'+flo.site_url+'/store/cart/">View Cart</a></div>',type:"success",shadow:!1});e("#issue-addtocart-"+t).removeAttr("disabled").removeClass("disabled").val(s);ajaxUpdateCartWidgets(n);if(e(".customAjaxAddToCartMessage").length>0){e(".customAjaxAddToCartMessage").show().html(r.msg);e.hookExecute("customAjaxAddToCartMessage",r)}else{if(parseInt(r.msgId,10)===0){e(".success_"+t).fadeIn(300);e(".success_message_"+t).html(r.msg);e(".success_"+t).delay(2e3).fadeOut(300)}if(r.msgId==-1){e(".warning_"+t).fadeIn(300);e(".warning_message_"+t).html(r.msg)}if(r.msgId==-2){e(".error_"+t).fadeIn(300);e(".error_message_"+t).html(r.msg)}}}})}});Modernizr.load([{test:Modernizr.borderradius,nope:[flo.template_dir+"/js/libs/selectivizr.min.js",flo.template_dir+"/js/libs/respond.min.js"]},{test:Modernizr.touch,yep:flo.template_dir+"/css/touch.css"}]);jQuery(function(e){var t=e(window);e.global_init=function(){function s(){e("#main .featured-vendors ul").featuredEqHeights()}function o(){var t=e(".list",i),n=e("ul > li span",t);e(".select",i).click(function(){if(t.is(":visible")){e(this).removeClass("active");t.slideUp("fast")}else{e(this).addClass("active");t.slideDown("fast")}});n.click(function(){var t=e(this),n=t.parent();n.hasClass("active")?n.removeClass("active"):n.addClass("active").siblings().removeClass("active")})}function u(){var n=e("#head-main"),r=e("#services-venues"),i=e("#responsive-footer");t.setBreakpoints({distinct:!0,breakpoints:[320,768,990]});t.bind("enterBreakpoint990",function(){n.append(r)});t.bind("enterBreakpoint768",function(){n.append(r)});t.bind("enterBreakpoint320",function(){i.append(r)});e("#nav-main > ul").floTinyNav({header:"Navigation"});e("#tinynav1").dxSelect()}e("a[rel$=external]").each(function(){e(this).attr("target","_blank")});var n=e("#main .page-title-container"),r=e("#main .page-foot-container"),i=e("#services-venues .regions");n.size()&&n.find(".categories select").dxSelect({hide_first:!0,clicked:function(){window.location.href=e(this).prop("title")}});r.size()&&r.find(".categories select").dxSelect({hide_first:!0,clicked:function(){window.location.href=e(this).prop("title")}});s();o();u()};e.global_init();e.fn.init_post=function(){var n=function(t){var n=e("section.respond",t),r=e("form",n),i=e("p.error",r),s=e(".cancel-comment-reply a",n),o=e("section.comments",t);e("a.comment-reply-link",t).on("click",function(r){r.preventDefault();var i=e(this).parents("li.comment");i.append(n);s.show();n.find("input[name=comment_post_ID]").val(t.data("post-id"));n.find("input[name=comment_parent]").val(i.data("comment-id"));n.find("input:first").focus()}).attr("onclick","");s.on("click",function(r){r.preventDefault();o.after(n);n.find("input[name=comment_post_ID]").val(t.data("post-id"));n.find("input[name=comment_parent]").val(0);e(this).hide()});r.ajaxForm({beforeSubmit:function(){i.text("").hide()},success:function(t){var r=e.parseJSON(t);if(r.error){i.html(r.msg).slideDown("fast");return}var u=parseInt(n.find("input[name=comment_parent]").val(),10),a=e(r.html),f;a.hide();if(u===0){f=o.find("ol");if(!f.length){f=e('<ol class="commentlist"></ol>');o.append(f)}}else{f=e("#comment-"+u).parent().find("ul");if(!f.length){f=e('<ul class="children"></ul>');e("#comment-"+u).parent().append(f)}s.trigger("click")}f.append(a);a.fadeIn("fast").scrollTo();n.find("textarea").clearFields()},error:function(e){var t=e.responseText.match(/<p\>(.*)<\/p\>/)[1];typeof t=="undefined"&&(t="Something went wrong. Please reload the page and try again.");i.html(t).slideDown("fast")}})};e(this).each(function(){var r=e(this);t.load(function(){var t=e(".gallery .flexslider",r),n=e("#post-thumbnails");n.flexslider({animation:"slide",slideshow:!1,controlNav:!1,smoothHeight:!1,keyboard:!1,itemWidth:81,itemMargin:0})});n(r);e("p, .video",r).fitVids()})};e("#post").init_post();e.fn.init_homepage=function(){e(this).each(function(){var n=e(this),r=e(".featured",n),i=e("ul li",r),s=e(".poster",r),o=e(".arrows",r),u,a;e("a",i).click(function(e){e.preventDefault()});i.click(function(t){t.preventDefault();var n=e(this);if(n.hasClass("active"))return;var r=s.filter(".active"),i=e(s[n.index()]);r.length&&r.fadeOut("fast",function(){r.removeClass("active")});i.fadeIn("fast",function(){i.addClass("active")});n.addClass("active").siblings(".active").removeClass("active");"undefined"==typeof t.isTrigger&&clearInterval(u)}).filter(":first").trigger("click");u=setInterval(function(){a=i.filter(".active").next();a.length||(a=i.filter(":first"));a.trigger("click")},5e3);e("a",o).click(function(t){t.preventDefault();var n=e(this),r=i.filter(".active"),s;if(n.hasClass("next")){s=r.next();s.length||(s=i.filter(":first"))}else{s=r.prev();s.length||(s=i.filter(":last"))}s.find("a").trigger("click")});t.bind("enterBreakpoint320",function(){clearInterval(u)})})};e("#homepage").init_homepage();e.fn.init_topcat=function(){e(this).each(function(){function r(t){var n=t.find("li");n.hover(function(){i(e(this),t)});i(n.filter(":first"),t)}function i(t,n){t.addClass("selected").siblings().removeClass("selected");e(".image",n).css("background-image",'url("'+t.data("image")+'")')}var t=e(this),n=e(".category-preview");n.each(function(){r(e(this))})})};e("#top-category").init_topcat();e.fn.init_gallery=function(){e(this).each(function(){var n=e(this);t.load(function(){e(".flexslider",n).flexslider({animation:"fade",slideshow:!1,controlNav:!1,smoothHeight:!0})})})};e("#gallery").init_gallery();e.fn.init_topcat=function(){e(this).each(function(){var t=e(this);t.find(".cover .flexslider").flexslider({animation:"fade",slideshow:!1,controlNav:!0,directionNav:!1,smoothHeight:!0})})};e("#top-category").init_topcat();e.fn.init_venue=function(){e(this).each(function(){function u(){var e=i.data("lat"),t=i.data("lng"),n=i.data("marker-image"),r=i.data("marker-shadow");i.gmap({backgroundColor:"#EAEAEA",mapTypeControl:!1,zoom:16,center:e+","+t,mapTypeId:google.maps.MapTypeId.ROADMAP}).bind("init",function(){i.gmap("addMarker",{position:e+","+t,icon:n,shadow:r}).click(function(){i.gmap("openInfoWindow",{content:"Hello World!"},this)})})}var n=e(this),r=e("#sidebar"),i=e("#venue-geomap"),s,o;i.length&&u();t.load(function(){s=e(".gallery .flexslider",n);o=e(".thumbs .flexslider",n);o.flexslider({animation:"slide",slideshow:!1,controlNav:!1,smoothHeight:!1,asNavFor:"#venue-gallery",keyboard:!1,itemWidth:81,itemMargin:0});s.flexslider({animation:"fade",slideshow:!1,controlNav:!1,smoothHeight:!1,sync:"#venue-thumbnails",prevText:"Prev",nextText:"Next"})});e("#vendor-tabs-information").easytabs({animationSpeed:"fast"});var a=e(".reviews",n),f=e(".respond",a);e("#venue-leave-a-review").click(function(e){e.preventDefault();a.find(f).slideToggle(function(){a.is(":visible")&&a.scrollTo()})});var l=e("#venue-side-info"),c=e("#venue-mobile-sidebar");t.bind("enterBreakpoint990",function(){r.prepend(l)});t.bind("enterBreakpoint768",function(){c.append(l)});t.bind("enterBreakpoint320",function(){c.append(l)})})};e("#venue").init_venue();e.fn.init_region=function(){e(this).each(function(){function s(t){var n=t.find("li");n.hover(function(){o(e(this),t)});o(n.filter(":first"),t)}function o(t,n){t.addClass("selected").siblings().removeClass("selected");e(".image",n).css("background-image",'url("'+t.data("image")+'")')}var t=e(this),n=e("#region-geomap"),r=n.data("marker-image"),i=n.data("marker-shadow");n.gmap({mapTypeId:google.maps.MapTypeId.ROADMAP,backgroundColor:"#EAEAEA",mapTypeControl:!1,zoom:10,callback:function(){e.getJSON(flo.ajax_load_url,{action:"flo_local_geoprofiles",region_id:n.data("region-id"),nonce:n.data("nonce")},function(s){s.markers.length>0&&e.each(s.markers,function(e,t){n.gmap("addMarker",{position:new google.maps.LatLng(t.lat,t.lng),icon:r,shadow:i}).click(function(){n.gmap("openInfoWindow",{content:t.html},this)})});n.gmap("search",{address:t.data("place")},function(e){n.gmap("option","center",e[0].geometry.location)})})}});s(e(".events",t))})};e("#region").init_region();e.fn.init_venues_map=function(){e(this).each(function(){function i(){var t;e.each(n,function(){t=e(this);t.data("geolat")&&r.push({position:t.data("geolat")+","+t.data("geolng"),html:s(t)})})}function s(e){var t="",n=e.find(".detail h2 a");t+='<h3><a href="'+n.prop("href")+'">'+n.text()+"</a></h3>";t+="<p>"+e.find(".detail .descr").text()+"</p>";return t}function o(){var n=t.data("marker-image"),s=t.data("marker-shadow");i();t.gmap({backgroundColor:"#EAEAEA",mapTypeControl:!1,zoom:10,center:"undefined"==typeof r[0]?"":r[0].position,mapTypeId:google.maps.MapTypeId.ROADMAP}).bind("init",function(){e.each(r,function(e,r){t.gmap("addMarker",{position:r.position,icon:n,shadow:s}).click(function(){t.gmap("openInfoWindow",{content:r.html},this)})})})}var t=e(this),n=e("#vendors-list li"),r=[];o()})};e("#venues-geomap").init_venues_map();e.fn.init_venues_list=function(){e(this).each(function(){var t=e(this),n=e(".searchbox",t);e(".refine a",t).click(function(t){t.preventDefault();n.slideToggle("fast");e(this).parent().parent().get(0).tagName=="FOOTER"&&n.scrollTo()})})};e("#content-main .vendors-list").init_venues_list();e.fn.init_area_map=function(){e(this).each(function(){var t=e(this),n=e(".map",t)})};e("#in-your-area-map").init_area_map();e.fn.init_advertisers=function(){e(this).each(function(){function s(){n.easytabs({animationSpeed:"fast"});e("div.video",n).fitVids();var t=e("#profile-gallery .uploader",n),r=e("#profile-files .uploader",n),i=e(".gallery ul",n),s={runtimes:"html5,flash,gears,silverlight,browserplus",buttons:{browse:!0,start:!1,stop:!1},multipart:!1,url:flo.template_dir+"/flotheme/upload/destination.php",headers:{},max_file_size:"4mb",chunk_size:"1mb",unique_names:!1,filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png"}],flash_swf_url:flo.template_dir+"/js/libs/plupload/js/plupload.flash.swf",silverlight_xap_url:flo.template_dir+"/js/libs/plupload/js/plupload.silverlight.xap",init:{FileUploaded:function(t,n,r){var s=e.parseJSON(r.response),o='<li><img src="'+s.preview+'" alt="" /><a href="#" class="delete" data-id="'+s.id+'">delete</a><a href="#" class="set-main" data-id="'+s.id+'">set main image</a></li>';i.append(o)},QueueChanged:function(e){},Error:function(){}}},o={runtimes:"html5,flash,gears,silverlight,browserplus",buttons:{browse:!0,start:!1,stop:!1},multipart:!1,url:flo.template_dir+"/flotheme/upload/destination.php",headers:{},max_file_size:"4mb",chunk_size:"1mb",unique_names:!1,filters:[{title:"Image files",extensions:"pdf,rtf,txt,doc,xml"}],flash_swf_url:flo.template_dir+"/js/libs/plupload/js/plupload.flash.swf",silverlight_xap_url:flo.template_dir+"/js/libs/plupload/js/plupload.silverlight.xap",init:{FileUploaded:function(t,n,r){var s=e.parseJSON(r.response),o='<li><img src="'+s.preview+'" alt="" /><a href="#" class="delete" data-id="'+s.id+'">delete</a></li>';i.append(o)},QueueChanged:function(e){},Error:function(){}}};t.pluploadQueue(s);r.pluploadQueue(o);i.find("a.delete").live("click",function(t){t.preventDefault();var n=e(this);if(!confirm("Are you sure you want to delete this image?"))return;e.get(flo.ajax_load_url,{action:"flo_adv_delete_image",id:n.data("id")},function(t){if(t.error){alert(t.msg);return}n.parent().fadeOut("fast",function(){e(this).remove()})},"json")});i.find("a.set-main").live("click",function(t){t.preventDefault();var n=e(this),r=n.parent();if(r.hasClass("main"))return;e.get(flo.ajax_load_url,{action:"flo_adv_set_main_image",id:n.data("id")},function(e){if(e.error){alert(e.msg);return}n.parent().addClass("main").siblings(".main").removeClass("main")},"json")})}function o(){}function u(){}var t=e(this),n=e(".b-profile",t),r=e(".b-events",t),i=e(".b-event",t);n.length&&s();r.length&&o();i.length&&o()})};e("#advertisers").init_advertisers();e.fn.init_subscribe=function(){e(this).each(function(){var t=e(this),n={ga:e(".annual .ga",t),flo:e(".annual .flo",t)};e("select",t).dxSelect({clicked:function(){var t=this.title;e.each(n,function(){e(this).hide()});n[t].show()}})})};e("#subscribe").init_subscribe();e.fn.init_featured_placement=function(){e(this).each(function(){function r(){var t=e(this),n=t.find("option:selected");t.find("option:selected").text().match(/\-\-/)||n.next().attr("selected","selected")}var t=e(this),n=e('select.gfield_select:contains("--")',t);n.change(r).trigger("change")})};e("#buy-featured-placement").init_featured_placement();e.fn.init_expo=function(){e(this).each(function(){var t=e(this);e("p",t).fitVids()})};e("#expo").init_expo()});